
name: Creates and Updates PR
on:
    pull_request:

jobs:
  pull-request:
    runs-on: ubuntu-latest
    steps:
      # Check out the repository code
      - uses: actions/checkout@v3

      # Generate a pull request description (this is a placeholder; replace with your actual script)
      - name: Generate PR description
        run: |
          # Example: Generate description based on commit messages or other criteria
          echo "Generating PR description based on changes..."
          # Here you would have a script that sets the description output
          echo "::set-output name=description::This is an auto-generated description based on the latest changes."
        id: description

      # Create or update the pull request from `master` to `release`
      - name: Create Pull Request
        uses: repo-sync/pull-request@v2
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          destination_branch: release
          pr_title: "Release: Updates from master"
      
      # Update the pull request description
      - name: Update Pull Request Description
        uses: kt3k/update-pr-description@v2
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          pr_body: ${{ steps.description.outputs.description }}
          destination_branch: release

